import{e as T,d as u,aE as E,_ as $,h as i,i as d,j as n,n as F,H as M,I as W,t as h,k as P,aF as K,aG as q,aH as H,aI as k,aJ as U,aK as I,aL as D,v as g,aM as L,aN as Q,an as o,aO as R,aP as N,aQ as Z,aR as B,aS as x,aC as G,P as z,aT as ee,aU as se,at as V,L as S,a2 as J,M as Y,m as te,N as ae}from"./index-CDmsQ_GZ.js";import{p as ie}from"./model-BhHIws06.js";const oe=T({props:["type","pc"],methods:{},computed:{tname(){return u.matchExpr(this.type,[[E.PayerMax,"-payermax"],[E.Checkout,"-checkout"]],()=>"")||""}}});function ne(e,s,t,a,r,c){return i(),d("div",{class:F(["cview",{"-pc":e.pc}])},[n("div",{class:F(["cviewIcon",e.tname])},null,2),s[0]||(s[0]=n("div",{class:"cviewDeco"},[n("i")],-1))],2)}const re=$(oe,[["render",ne]]);var ue={VUE_APP_BASE_URL:"https://arab-pk.badambiz.com/",VUE_APP_ENV:"production",VUE_APP_LANGUAGE:"ar",VUE_APP_PROJ_NAME:"",VUE_APP_DEPLOY_SERVER:"ar",VUE_APP_DEPLOY_SERVER_DIST:"",VUE_APP_PROXY_URL:"https://test20-pk.badambiz.com/",VUE_APP_PUBLIC_PATH:"/",VUE_APP_CDN_PATH:"https://sawa-official.github.io/",VUE_APP_TRANSLATE_PROJ:"sawa-h5",VUE_APP_TRANSLATE_SHEET:"sawa官网优化",VUE_APP_TRANSLATE_DOCUMENT:"",VUE_APP_TRANSLATE_SHEET_LANG:"",VUE_APP_FLAVOR:"ksa",VUE_APP_DEPLOY:"github",VUE_APP_SUFFIX:"mobile",VUE_APP_CWD:"代表项目本地根目录不要尝试改变这个值否则你会被炒鱿鱼",VUE_APP_EXTERNALS:"",VUE_APP_ICON:"https://oss-pk-arab.badambiz.com/4c9334bb9c4d7bd3389f9ac272dcf7dc_logo_ksa.ico",VUE_APP_TITLE:"SawaKSA",VUE_APP_SOURCEMAP:"false",VUE_APP_DISABLE_CSS_MODULE:"false",VUE_APP_RELEASE_URL:"https://arab-pk-release.badambiz.com/",VUE_APP_DIST:"dist/mobile",VUE_APP_VERSION:"1.0.333",VITE_APP_TEST:1,VUE_APP_NO_GEN_INDEX_HTML:"true",VUE_APP_FLAVOR2:"ludo",VUE_APP_WEBSITE_VERSION:"1.0.333"};const de=T({props:["type"],methods:{},computed:{iconsV(){try{return ie[this.type][ue.VUE_APP_FLAVOR]}catch(e){return[]}}}}),_e={class:"bview"};function ce(e,s,t,a,r,c){return i(),d("div",_e,[(i(!0),d(M,null,W(e.iconsV,(_,m)=>(i(),d("div",{class:F(["bviewIcon","-"+_]),key:m},null,2))),128))])}const le=$(de,[["render",ce]]),pe=T({props:["succeed","title","desc"],methods:{},computed:{iconV(){return this.succeed?"-succeed":"-failed"}}}),ye={class:"rview"},he={class:"rviewTitle"},me={key:0,class:"rviewDesc"},fe={class:"rviewDesc"};function ge(e,s,t,a,r,c){return i(),d("div",ye,[n("div",{class:F(["rviewIcon",e.iconV])},null,2),n("div",he,h(e.title),1),e.desc?(i(),d("div",me,h(e.desc),1)):P("",!0),n("div",fe,[K(e.$slots,"default")])])}const Pe=$(pe,[["render",ge]]),Ee=T({props:["succeed","title","desc"],methods:{_T:u._T,onConfirm(){this.close(),window.location.reload()},close(){this.$parent.show=!1}},computed:{iconV(){return this.succeed?"-succeed":"-failed"}}}),Ae={class:"rmodal"},be={class:"rmodalTitle"};function Te(e,s,t,a,r,c){return i(),d("div",Ae,[n("div",be,h(e._T("罚款金额发生改变，请刷新")),1),n("div",{class:"rmodalBtn",onClick:s[0]||(s[0]=(..._)=>e.onConfirm&&e.onConfirm(..._))},h(e._T("刷新")),1)])}const X=$(Ee,[["render",Te]]),$e=T({components:{ChannelView:re,BankViews:le,ResultView:Pe},data(){return{loaded:!1,hasResult:!1,succeed:!1,broken:!1,refund_amount:0,display_uid:0,channels:u.getArgsFromUrl("open_payermax")?[E.Checkout,E.PayerMax]:[E.Checkout],channelSelected:E.Checkout,rules:[u._T("系统会根据用户账号的退款金额计算需要缴纳的罚款金额。成功缴纳罚款后，账号将会自动解封。账号内因退款而被扣除的钻石不予返还，若账号内钻石因退款而扣至负数，需要额外补纳相应差额。"),u._T("根据账号的退款封号次数，罚金的金额会不断翻倍。"),u._T("若对于解封账号或解封规则有疑问，请联系Sawa官方人员（WhatsApp：+20 1080541454）")],isCharging:!1}},mounted(){this.init()},methods:{_T:u._T,textWithRTL:u.textWithRTL,sprintf:u.sprintf,init(){const e=u.getArgsFromUrl("result");if(e!==null){if(this.succeed=String(e)==="0",!localStorage.getItem("last_display_uid")&&this.succeed){this.broken=!0,this.loaded=!0;return}const s=u.getArgsFromUrl("ext");let t=0,a=0;try{const r=JSON.parse(s);console.log("extObj",r),t=r.display_uid||localStorage.getItem("last_display_uid"),a=r.pay_at,a&&t&&(localStorage.getItem("rt_".concat(t,"_").concat(a))?this.succeed?(this.broken=!0,this.loaded=!0):this.$router.push({name:"fines",query:{id:localStorage.getItem("last_id")}}):(localStorage.setItem("rt_".concat(t,"_").concat(a),"1"),this.succeed&&this.reportPage("支付成功页面")))}catch(r){}finally{this.display_uid=t,this.broken||(this.hasResult=!0)}return}this.reportPage("支付页面"),this.getInfo()},async getInfo(){const e=u.getArgsFromUrl("id")||0;localStorage.setItem("last_id",e.toString()),localStorage.setItem("last_display_uid","");const[s,{result:t,data:a}]=await q(e);if(this.loaded=!0,!s||t!==0){t===21260&&(this.broken=!0);return}this.refund_amount=a.refund_amount,this.display_uid=a.display_uid,localStorage.setItem("last_display_uid",a.display_uid)},async onCreateFines(){var s,t,a,r;if(this.isCharging)return;this.isCharging=!0;let e;H().source===1?e="独立端":H().source===4&&(e="内嵌ludo"),k(B.click_recharge,{h5_deviceid:U(),act_from:I(),login_source:D(),is_login:!!g().skey,duration:0,other_id:this.display_uid,source:"罚款解封页面",type:L(),number:0,amount:this.refund_amount,page:"罚款解封页面",website_version:Q(),display_uid:(s=g().user)==null?void 0:s.uid,pay_distinct_id:Number((t=o().pay2User)==null?void 0:t.uid),pay_display_uid:String((a=o().pay2User)==null?void 0:a.display_uid),session_id:R(!0),good_id:(((r=o().currentPayItem)==null?void 0:r.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),is_support_applepay:N(),is_gray:!!Z(),app_type:e,is_auto:!1}),u.matchExpr(this.channelSelected,[[E.Checkout,this.onCreateCheckout],[E.PayerMax,this.onCreatePayermax]])},async onCreatePayermax(){var s,t,a,r,c,_,m,A,l,f,C,v;const e=Date.now();try{const p=u.getArgsFromUrl("id")||"",[b,{result:y,data:w,message:O}]=await x({id:p,amount:this.refund_amount,ext:await this.getExt()});if(await k(B.h5_create_pay_result,{h5_deviceid:U(),act_from:I(),login_source:D(),is_login:!!g().skey,duration:Date.now()-e,source:"罚款解封页面",type:L(),page:"罚款解封页面",is_succeed:b&&y===0,fail_reason:b&&y===0?"":"".concat(y,":").concat(O),display_uid:(s=g().user)==null?void 0:s.uid,pay_distinct_id:Number((t=o().pay2User)==null?void 0:t.uid),pay_display_uid:String((a=o().pay2User)==null?void 0:a.display_uid),session_id:R(),good_id:(((r=o().currentPayItem)==null?void 0:r.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),amount:((c=o().currentPayItem)==null?void 0:c.amount)||0,number:((_=o().currentPayItem)==null?void 0:_.coin)||0,is_support_applepay:N()}),this.isCharging=!1,!b||y!==0){if(y===21262){G(X,{});return}z(u._T("提交失败，请联系客服人员"));return}w.url&&(this.isCharging=!0,window.location.href=w.url)}catch(p){console.error(p),this.isCharging=!1,await k(B.h5_create_pay_result,{h5_deviceid:U(),act_from:I(),login_source:D(),is_login:!!g().skey,duration:Date.now()-e,source:"罚款解封页面",type:L(),page:"罚款解封页面",is_succeed:!1,fail_reason:(p==null?void 0:p.message)||"",display_uid:(m=g().user)==null?void 0:m.uid,pay_distinct_id:Number((A=o().pay2User)==null?void 0:A.uid),pay_display_uid:String((l=o().pay2User)==null?void 0:l.display_uid),session_id:R(),good_id:(((f=o().currentPayItem)==null?void 0:f.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),amount:(C=o().currentPayItem)==null?void 0:C.amount,number:((v=o().currentPayItem)==null?void 0:v.coin)||0,is_support_applepay:N()})}},async onCreateCheckout(){var s,t,a,r,c,_,m,A,l,f,C,v;const e=Date.now();try{const p=u.getArgsFromUrl("id")||"",[b,{result:y,data:w,message:O}]=await ee({id:p,amount:this.refund_amount,ext:await this.getExt()});if(await k(B.h5_create_pay_result,{h5_deviceid:U(),act_from:I(),login_source:D(),is_login:!!g().skey,duration:Date.now()-e,source:"罚款解封页面",type:L(),page:"罚款解封页面",is_succeed:b&&y===0,fail_reason:b&&y===0?"":"".concat(y,":").concat(O),display_uid:(s=g().user)==null?void 0:s.uid,pay_distinct_id:Number((t=o().pay2User)==null?void 0:t.uid),pay_display_uid:String((a=o().pay2User)==null?void 0:a.display_uid),session_id:R(),good_id:(((r=o().currentPayItem)==null?void 0:r.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),amount:(c=o().currentPayItem)==null?void 0:c.amount,number:((_=o().currentPayItem)==null?void 0:_.coin)||0,is_support_applepay:N()}),this.isCharging=!1,console.log("ret",y,w),!b||y!==0){if(y===21262){G(X,{});return}z(u._T("提交失败，请联系客服人员"));return}w.url&&(this.isCharging=!0,window.location.href=w.url)}catch(p){console.error(p),this.isCharging=!1,await k(B.h5_create_pay_result,{h5_deviceid:U(),act_from:I(),login_source:D(),is_login:!!g().skey,duration:Date.now()-e,source:"罚款解封页面",type:L(),page:"罚款解封页面",is_succeed:!1,fail_reason:(p==null?void 0:p.message)||"",display_uid:(m=g().user)==null?void 0:m.uid,pay_distinct_id:Number((A=o().pay2User)==null?void 0:A.uid),pay_display_uid:String((l=o().pay2User)==null?void 0:l.display_uid),session_id:R(),good_id:(((f=o().currentPayItem)==null?void 0:f.payItemDisplayMethods[0].methods[0].recharge_id)||0).toString(),amount:(C=o().currentPayItem)==null?void 0:C.amount,number:((v=o().currentPayItem)==null?void 0:v.coin)||0,is_support_applepay:N()})}},reportPage(e){u.reportWebSensors("h5_pay_fines_page_show",{page:e})},async getExt(){return JSON.stringify(await se())}}}),Ce={class:"finesPage"},we={key:1,class:"fhead"},Se=["innerHTML"],Ve={class:"fhead__fee"},Fe={key:2,class:"fbody"},ve={class:"fbodyWay"},ke={class:"fbodyWay__way"},Ue={class:"fbodyWay__wayTitle"},Ie={class:"fbodyWay__wayItems"},De={class:"fbodyWay__bank"},Le={class:"fbodyWay__bankTitle"},Re={class:"fAbout"},Ne={class:"fAbout__title"},Be={class:"fAbout__itemNum"},Me=["innerHTML"];function Oe(e,s,t,a,r,c){const _=V("ResultView"),m=V("ChannelView"),A=V("BankViews");return i(),d("div",Ce,[e.loaded?(i(),d(M,{key:0},[e.broken?(i(),S(_,{key:0,title:e._T("链接失效"),succeed:!1},{default:J(()=>[te(h(e.textWithRTL(e._T("本链接已失效，有任何疑问请反馈给Sawa官方人员"))),1)]),_:1},8,["title"])):P("",!0),e.broken?P("",!0):(i(),d("div",we,[e.display_uid?(i(),d("div",{key:0,class:"fhead__id",innerHTML:e.textWithRTL(e.sprintf(e._T("解封账号 {n} 需要缴纳罚款金额"),{n:"<i>ID ".concat(e.display_uid,"</i>")}))},null,8,Se)):P("",!0),n("div",Ve,"$"+h(e.refund_amount),1)])),e.broken?P("",!0):(i(),d("div",Fe,[n("div",ve,[n("div",ke,[n("div",Ue,h(e._T("充值渠道")),1),n("div",Ie,[(i(!0),d(M,null,W(e.channels,(l,f)=>(i(),S(m,{class:F(["fbodyWay__wayItem",{"-on":l===e.channelSelected}]),type:l,onClick:C=>e.channelSelected=l,key:f},null,8,["class","type","onClick"]))),128))])]),s[1]||(s[1]=n("div",{class:"fbodyWay__hr"},null,-1)),n("div",De,[n("div",Le,h(e._T("可用充值方式")),1),Y(A,{type:e.channelSelected},null,8,["type"])])]),n("div",{class:"fConfirm",onClick:s[0]||(s[0]=(...l)=>e.onCreateFines&&e.onCreateFines(...l))},[n("i",null,h(e._T("支付罚款")),1)]),n("div",Re,[n("div",Ne,h(e._T("解封规则说明")),1),(i(!0),d(M,null,W(e.rules,(l,f)=>(i(),d("div",{class:"fAbout__item",key:f},[n("div",Be,h(f+1),1),n("div",{class:F(["fAbout__itemText",{"-center":f===2}])},h(e.textWithRTL(l)),3)]))),128))])]))],64)):P("",!0),e.hasResult?(i(),d(M,{key:1},[e.succeed?(i(),S(_,{key:0,title:e._T("支付成功"),succeed:!0},{default:J(()=>[n("div",{innerHTML:e.textWithRTL(e.sprintf(e._T("用户账号 {n} 将在几分钟内解封，请耐心等待"),{n:"<i>(ID: ".concat(e.display_uid||"-",")</i>")}))},null,8,Me)]),_:1},8,["title"])):P("",!0),e.succeed?P("",!0):(i(),S(_,{key:1,title:e._T("支付失败"),succeed:!1},null,8,["title"]))],64)):P("",!0)])}const j=$($e,[["render",Oe]]),We=T({components:{MobileView:j},data(){return{}},mounted(){},methods:{}}),He={class:"pcFines"};function Ge(e,s,t,a,r,c){const _=V("MobileView");return i(),d("div",He,[Y(_)])}const ze=$(We,[["render",Ge]]),Je=T({components:{PcFines:ze,MobileFines:j},data(){return{isPc:ae()}}}),Xe={class:"fineWrap"};function Ye(e,s,t,a,r,c){const _=V("PcFines"),m=V("MobileFines");return i(),d("div",Xe,[e.isPc?(i(),S(_,{key:0})):(i(),S(m,{key:1}))])}const qe=$(Je,[["render",Ye],["__scopeId","data-v-d5a45da2"]]);export{qe as default};
